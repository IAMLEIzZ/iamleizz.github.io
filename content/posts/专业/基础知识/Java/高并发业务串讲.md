---
title: "高并发业务理解"
date: 2025-09-15T23:23:28+08:00
lastmod: 2025-09-15T23:23:28+08:00
draft: true
tags: 
categories:
author: 小石堆
---
## 高并发
我理解的高并发业务主要是两点：
1. 在同一时刻有大量的请求访问你的业务
2. 在一个时间段内，你的业务要处理大量的请求

也就是说，你的业务如果要支持高并发，需要保证下面两点：
1. 在同一时刻大量请求访问业务的时候，你的业务不能垮掉
2. 在同一时间段内，大量请求访问业务的时候，你的业务要保证正确性
## 满足高并发的系统设计
从上面两点入手，一个满足高并发的系统应该是什么样的呢？
### 在同一时刻有大量的请求访问你的业务
1. 硬件升级
	- 提升 CPU 、内存、硬盘，保证硬件不拉跨
	- 作用：提高单机吞吐能力
2. 负载均衡：
	- 多台机器组成集群，通过 LB 分散请求压力。
	- 方式：Nginx
3. 限流
	- 当请求超过系统处理能力时，主动拒绝或排队部分请求
	- 方式：令牌桶、漏桶、滑动窗口等算法
4. MQ
	- 异步削峰填谷，让业务按照自身能力处理请求
	- 常用：Kafka、RabbitMQ、RocketMQ
5. 缓存
	- 热点数据先读缓存，减轻数据库压力
    - 避免缓存穿透 / 缓存击穿
6. 数据库优化
	- 分库分表、读写分离、索引优化、SQL 调优
	- 目的：减轻单库压力，提高吞吐能力。
### 在一个时间段内，你的业务要处理大量的请求
1. 锁
	- 控制共享资源访问，保证业务正确性。
    - 包括 **乐观锁/悲观锁/分布式锁**。
2. 高并发模型
- 通过非阻塞或事件驱动架构处理高并发请求。
    - 例如：
        - **Actor 模型（Akka）**：每个 Actor 独立处理消息，无共享状态
        - **Reactor/NIO**：非阻塞 I/O，线程少却能处理大量连接
        - **协程/Go 协程**：轻量线程，提高并发度
