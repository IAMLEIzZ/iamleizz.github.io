---
title: "分布式事务"
date: 2025-10-02T16:36:09+08:00
lastmod: 2025-10-02T16:36:09+08:00
draft: true
tags: 
categories:
author: 小石堆
---
# 单机事务
单机下的事务是比较容易实现的，这里我们使用 Mysql 的事务来举例
## 事务的 ACID 原则
Atomic（原子性）：事务的一组操作中的所有操作，要么全部成功，要么全部失败，就像一个操作一样
Consistency（一致性）：事务的提交前后，数据库的一致性约束不会被破坏
Isolation（隔离性）：多个事务并发操作的时候，要具备相互隔离的性质，一个事务不能被其他事务所影响
Duration（持久性）：一个事务提交后，其对数据库的改动就永久保留了，就算断电也不会影响到数据。
## Mysql 的事务
对于 A，Mysql 通过 UndoLog 来保障
对于 I，Mysql 通过锁和 MVCC 来保障
对于 D，Mysql 通过 RedoLog 来保障
对于 C，Mysql 通过上面的 AID 来保障
## 分布式事务
单机事务的完备被分布式的不稳定性所打破，如下列场景：
DB1：小王 = 1919
DB2：小张= 1778
Transcation：